## Ping: Internet Control Message Protocol

When network problems come up the most common issue you'll run into is the inability to establish a connection with something. It could be a server you can't reach at all, or a website that isn't loading. Maybe you can only reach your resource on your LAN and can't connect to anything on the Internet. Whatever the problem is, being able to diagnose connectivity issues is an important part of network troubleshooting. By the end of this lesson you'll be able to use a number of important troubleshooting tools to help resolve these issues. When a network error occurs the device that detects it needs some way to communicate this to the source of the problematic traffic. It could be that a router doesn't know how to route to a destination, or that a certain port isn't reachable. It could even be that the TTL of an IP datagram expired and no further router hops will be attempted. For all of these situations an more ICMP or Internet control message protocol is used to communicate these issues. ICMP is mainly used by a router or remote host to communicate why a transmission has failed back to the origin of the transmission. The makeup of an ICMP packet is pretty simple, it has a header with a few fields, and a data section that's used by host to figure out which of their transmissions generated the error. The first field is the type field 8 bits along which specifies what type of message is being delivered. Some examples are destination unreachable, or time exceeded. Immediately after this is the code field which indicates a more specific reason for the message than just the type, for example of the destination unreachable type there are individual codes for things like destination network unreachable, and destination port unreachable. After this is a 16 bit checksum that works like every other checksum field we've covered so far. Next up is a 32 bit field with an uninspired name, rest of header. You think they could come up with something a bit more interesting, but I can't really think of anything good so who am I to judge? Anyway this field is optionally used by some of the specific types and codes to send more data. After this is the data payload for an ICMP packet. The payload for an ICMP packet exists entirely so that the recipient of the message knows which of their transmissions cause the error being reported. It contains the entire IP header, and the first 8 bytes of the data payload section of the offending packet. ICMP wasn't really developed for humans to interact with. The point is so that these sorts of error messages can be delivered between networked computers automatically. But there's also a specific tool and two message types that are very useful to human operators. This tool is called ping. Some version of it exists on just about every operating system and has for a very long time. Ping is a super simple program and the basics are the same no matter which operating system you're using. Ping let's you send a special type of ICMP message called an echo request. An ICMP echo requests essentially just acid destination. Hey are you there? If the destination is up and running and able to communicate on the network, it will send back an ICMP echo reply message type. You can invoke the Ping Command from the command line of any modern operating system. In its most basic use you just typing and a destination IP or a fully qualified domain name. If you don't know how to use a command line in an operating system, don't worry you will soon we'll cover that in another course. Output of the Ping Command is very similar across each of the different operating systems. Every line of output will generally display the adverse sending the ICMP Echo reply, and how long it took for the round trip communications. It will also have the TTL remaining and how large the ICMP message is in bytes. Once the command ends, there will also be some statistics displayed, like percentage of packets transmitted and received, the average round trip time, and a couple other things like that. On Linux and Mac OS, the Ping Command will run until it's interrupted by an end user sending an interrupt event. They do this by pressing the control key and the C key at the same time. On Windows, Ping defaults to only sending 4Echo requests. In all environments PING supports a number of command line flags that let you change its behavior like the number of echo request to send, how large they should be, and how quickly they should be sent. Check out the documentation for your operating system to learn a little bit more.



当网络问题出现时，您会遇到的最常见问题 是无法与某些东西建立连接。 它可能是一个你根本无法访问的服务器，或者一个没有加载的网站。 也许您只能访问您的局域网上的资源， 无法连接到互联网上的任何内容。 无论出现什么问题，能够诊断连接问题是 网络故障排除的重要组成部分。 在 本课结束时，您将能够使用许多重要的 故障排除工具来帮助解决这些问题。 当发生网络错误时，检测到它的设备 需要某种方式将其传递给有问题的通信源。 可能是路由器不知道如何路由到目的地，或者 某个端口无法访问。 甚至可能是 IP 数据报的 TTL 过期， 不会尝试进一步的路由器跃点。 对于所有这些情况，使用更多 ICMP 或 Internet 控制消息协议来传达这些问题。 ICMP 主要用于路由器或远程主机来传达 传输故障回传输原因的原因。 ICMP 数据包的构成非常简单， 它有一个包含几个字段的标头和一个数据部分， 主机用来确定哪些传输产生了错误。 第一个字段是类型字段 8 位 沿着它指定要传递的消息类型。 有些示例包括目标无法到达或超过时间。 紧接着是代码字段，它指示 消息的更具体原因，而不仅仅是类型， 例如目标无法到达的类型，对于目标 网络无法访问和目标端口无法访问等事项，都有单独的代码。 之后是一个 16 位校验和，就像 迄今为止我们已经覆盖的所有其他校验和字段一样工作。接下来是一个 32 位字段，带有一个不受启发的名称，头部的其余部分。 你觉得他们可以想出一些更有趣的东西，但 我不能真正想到任何好东西，所以我该评判谁？ 无论如何，某些特定类型和 代码可以选择使用此字段来发送更多数据。 之后是 ICMP 数据包的数据负载。 ICMP 数据包的有效负载完全存在 ，以便消息的收件人知道 其中哪些传输导致了报告错误。 它包含整个 IP 报头以及 违规数据包的前 8 个字节的数据负载部分。 ICMP 并不是真正为人类开发的。 关键在于，这些错误消息可以在 联网的计算机之间自动传递。 但也有一个特定的工具和 两种消息类型对人类操作员非常有用。 此工具称为 ping。 它的某些版本存在于几乎每个操作系统上 ，并且有很长一段时间。 Ping 是一个超级简单的程序， 无论您使用哪个操作系统，基础知识都是一样的。 Ping 让您发送一种特殊类型的 ICMP 消息，称为回显请求。 ICMP 回声请求基本上只是酸性目的地。 嘿，你在吗？ 如果目标已启动并且能够在网络上进行通信， 它将发回 ICMP echo 回复消息类型。您可以从任何现代操作 系统的命令行调用 Ping 命令。 在其最基本的用途中，您只需输入和目标 IP 或 完全限定的域名。 如果您不知道如何在操作系统中使用命令行，请 不要担心，我们很快会在其他课程中介绍这一点。在每个不同的操作 系统中，Ping 命令的输出非常相似。 每一行输出通常都会显示负面发送 ICMP Echo 回 复的情况，以及往返通信所花费的时间。 它还将剩余 TTL 以及 ICMP 消息的大小（以字节为单位）。 命令结束后，还会显示一些统计信息， 例如传输和接收数据包的百分比、 平均往返时间以及其他几个类似的内容。 在 Linux 和 Mac OS 上，Ping 命令将运行，直到发 送中断事件的最终用户中断为止。 他们通过同时按下控制键和 C 键来完成此操作。 在 Windows 上，Ping 默认为只发送 4 回声请求。 在所有环境中，PING 都支持许多命令行标志，这些标志允许 您更改其行为，例 如要发送的 echo 请求的数量、它们的大小以及它们的发送速度。 查看 操作系统的文档，了解更多信息。