## Overview of DHCP

Managing hosts on a network can be a daunting and time consuming task. Every single computer on a modern TCP/IP based network needs to have at least four things specifically configured. An IP address, the subnet mask for the local network, a primary gateway and a name server. On their own, these four things don't seem like much, but when you have to configure them on hundreds of machines it becomes super tedious. Out of these four things, three are likely the same on just about every node on the network. The subnet mask, the primary gateway, and DNS server. But the last item an IP address needs to be different on every single node on the network. That could require a lot of tricky configuration work, and this is where DHCP or Dynamic Host Configuration Protocol comes into play. Listen up, because DHCP is critical to know as an IT support specialist when it comes to troubleshooting networks. DHCP is an application layer protocol that automates the configuration process of hosts on a network. With DHCP, a machine can query a DHCP server when the computer connects to the network and receive all the networking configuration in one go. Not only does DHCP reduce the administrative overhead of having to configure lots of network devices on a single network, it also helps address the problem of having to choose what IP to assign to what machine. Every computer on a network requires an IP for communications, but very few of them require an IP that would be commonly known. For servers or network equipment on your network, like your gateway router, a static and known IP address is pretty important. For example, the devices on a network need to know the IP of their gateway at all time. If the local DNS server was malfunctioning, network administrators would still need a way to connect to some of these devices through their IP. Without a static IP configured for a DNS server, it would be hard to connect to it to diagnose any problems if it was malfunctioning. But for a bunch of client devices like desktops or laptops or even mobile phones, it's really only important that they have an IP on the right network. It's much less important exactly which IP that is. Using DHCP you can configure a range of IP addresses that's set aside for these client devices. This ensures that any of these devices can obtain an IP address when they need one. But solves the problem of having to maintain a list of every node on the network and its corresponding IP. There are a few standard ways that DHCP can operate. DHCP dynamic allocation, is the most common, and it works how we described it just now. A range of IP addresses is set aside for client devices and one of these IPs is issued to these devices when they request one. Under a dynamic allocation the IP of a computer could be different almost every time it connects to the network. Automatic allocation is very similar to dynamic allocation, in that a range of IP addresses is set aside for assignment purposes. The main difference here is that, the DHCP server is asked to keep track of which IPs it's assigned to certain devices in the past. Using this information, the DHCP server will assign the same IP to the same machine each time if possible. Finally, there's what's known as fixed allocation. Fixed allocation requires a manually specified list of MAC address and their corresponding IPs. When a computer requests an IP, the DHCP server looks for its MAC address in a table and assigns the IP that corresponds to that MAC address. If the MAC address isn't found, the DHCP server might fall back to automatic or dynamic allocation, or it might refuse to assign an IP altogether. This can be used as a security measure to ensure that only devices that have had their MAC address specifically configured at the DHCP server will ever be able to obtain an IP and communicate on the network. It's worth calling out that DHCP discovery can be used to configure lots of things beyond what we've touched down here. Along with things like IP address, an primary gateway, you could also use DHCP to assign things like NTP servers. NTP stands for Network Time Protocol and is used to keep all computers on a network synchronized in time. We'll cover it in more detail in later courses, but for now it's just worth knowing that DHCP can be used for more than just IP, subnet mask, gateway and DNS server.



管理网络上的主机可能是一项艰巨而耗时的任务。 基于 TCP/IP 的现代网络上的每台计算机都需要至少 具有四个特殊配置。 IP 地址、本地网络的子网掩码、 主网关和名称服务器。 就其本身而言，这四件事情似乎并不多，但是当你必须在 数百台机器上配置它们时，它变得非常繁琐。 在这四种情况中， 三种可能在网络上几乎每个节点上都是相同的。 子网掩码、主网关和 DNS 服务器。 但是，IP 地址的最后一个项目需要在 网络上的每个节点上不同。 这可能需要大量棘手的配置工作，而 这正是 DHCP 或动态主机配置协议发挥作用的地方。 请听一下，因为 DHCP 作为 IT 支持专家在进行网络故障排除时至关重要。DHCP 是一 种自动化网络上主机配置过程的应用层协议。 使用 DHCP，计算机可以 在计算机连接到网络时查询 DHCP 服务器，并一次性接收所有网络配置。 DHCP 不仅减少了在 单个网络上配置大量网络设备的管理开销，而且还有助于解决 必须选择将哪些 IP 分配给哪台计算机的问题。 网络中的每台计算机都需要 IP 进行通信，但 很少有计算机需要一个常见的 IP。 对于网络中的服务器或网络设备（如网关路由器）来说 ，静态和已知 IP 地址非常重要。 例如， 网络上的设备需要随时知道其网关的 IP。 如果本地 DNS 服务器出现故障，网络管理员 仍需要通过其 IP 连接到其中某些设备的方法。如果没有为 DNS 服务器配置静态 IP，则在出现故障时很难连接到该服务器来诊断任何问题。 但是，对 于诸如台式机、笔记本电脑、甚至是移动电话等一堆客户端设备，在正确的网络上拥有 IP 是非常重要的。 确切地说哪个 IP 是不太重要。 使用 DHCP，您可以配置为 这些客户端设备预留的 IP 地址范围。 这可确保这些设备中的任何一个在需要 IP 地址时都可以获取 IP 地址。 但解决了必须维护 网络上每个节点及其相应 IP 的列表的问题。DHCP 可以通过几种标准方式进行操作。 DHCP 动态分配, 是最常见的, 它的工作原理是我们刚才描述它. 为客户端设备预留 一系列 IP 地址，并在这些设备请求时向其发出其中一个 IP 地址。 在 动态分配下，计算机的 IP 几乎每次连接到网络时都可能会有所不同。 自动分配与动态分配非常相似， 因为一定范围的 IP 地址是为了分配目的而预留的。 这里的主要区别在于，DHCP 服务器被要求跟踪 它过去分配给某些设备的 IP。 使用此信息， DHCP 服务器将每次将相同的 IP 分配给同一台计算机（如果可能）。 最后，还有所谓的固定分配。 固定分配需要手动指定的 MAC 地址及 其相应 IP 列表。 当计算机请求 IP 时，DHCP 服务器会在 表中查找其 MAC 地址，并分配与该 MAC 地址相对应的 IP。 如果找不到 MAC 地址，则 DHCP 服务器可能会回退到自动或动 态分配，或者可能拒绝完全分配 IP。 这可以用作安全措施，以确保只有 在 DHCP 服务器上专门配置了 MAC 地址的设备才能 获得 IP 并在网络上通信。 值得一提的是，DHCP 发现 可用于配置除了我们在这里介绍的内容之外的许多事情。 除了 IP 地址（主网关）之外， 您还可以使用 DHCP 来分配 NTP 服务器等内容。 NTP 代表网络时间协议， 用于保持网络上的所有计算机的时间同步。 我们将在后面的课程中详细介绍 它，但现在值得一提的是，DHCP 不仅可用于 IP、 子网掩码、网关和 DNS 服务器。