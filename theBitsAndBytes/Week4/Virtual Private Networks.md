## Virtual Private Networks

Businesses have lots of reasons to want to keep their network secure, and they do this by using some of the technologies we've already discussed firewalls, Nat, use of non routable address space, things like that. Organizations often have proprietary information that needs to remain secure. Network services that are only intended for employees to access and other things. One of the easiest ways to keep network secure is to use various securing technologies, so only devices physically connected to their local area network can access these resources. But employees aren't always in the office. They might be working from home or on a business trip, and they might still need access to these resources in order to get their work done. That's where VPNs come in. Virtual private networks or VPNs are a technology that allows for the extension of a private or local network to host that might not work on that same local network. VPNs come in many flavors and accomplish lots of different things. But the most common example of how VPNs are used is for employees to access their business's network when they're not in the office. VPNs are a tunneling protocol, which means they provision access to something not locally available. When establishing a VPN connection, you might also say that a VPN tunnel has been established. Let's go back to the example of an employee who needs to access company resources while not in the office. The employee could use a VPN client to establish a VPN tunnel to their company network. This would provision their computer with what's known as a virtual interface with an IP that matches the address space of the network they've established a VPN connection to. By sending data out of this virtual interface, the computer could access internal resources just like if it was physically connected to the private network. Most VPNs work by using the payload section of the transport layer to carry an encrypted payload that actually contains an entire second set of packets. The network, the transport and the application layers of a packet intended to traverse the remote network. Basically, this payload is carried to the VPNs end point where all the other layers are stripped away and discarded. Then the payload is unencrypted, leaving the VPN server with the top three layers of a new packet. This gets encapsulated with the proper data link layer information and sent out across the network. This process is completed in the inverse, in the opposite direction. VPNs usually requires strict authentication procedures in order to ensure that they can only be connected to by computers and users authorized to do so. In fact, VPNs were one of the first technologies where two-factor authentication became common. Two-factor authentication is a technique where more than just a username and password are required to authenticate. Usually a short lived numerical token is generated by the user through a specialized piece of hardware or software. VPNs can also be used to establish site to site connectivity. Conceptually, there isn't much difference between how this works compared to our remote employees situation. It's just that the router, or sometimes a specialized VPN device on one network establishes the VPN tunnel to the router or VPN device on another network. This way two physically separated offices might be able to act as one network and access network resources across the tunnel. It's important to call out that, just like Nat, VPNs are a general technology concept, not a strictly defined protocol. There are lots of unique implementations of VPNs, and the details of how they all work can differ a ton. The most important takeaway is that VPNs are a technology that use encrypted tunnels to allow for a remote computer or network to act as if it's connected to a network that it's not actually physically connected to.



企业有很多理由希望保持网络安全， 他们通过使用我们已经讨论过的 防火墙技术，Nat，使用非路由地址空间，类似的事情来做到这一点。 企业通常拥有需要保持安全的专有信息。 仅供员工访问和其他内容使用的网络服务。 确 保网络安全的最简单方法之一是使用各种安 全技术，因此只有物理连接到局 域网的设备才能访问这些资源。 但员工并不总是在办公室里。 他们可能 在家工作或出差，他们可能仍然需要获得这些资源才能完成工作。 这就是 VPN 进来的地方。 虚拟专用网络或 VPN 是一种技术，允许将 专用网络或本地网络扩展到可能无法在同一本地网络上工作的主机。 VPN 有许多口味，可以完成许多不同的事情。 但是，如何使用 VPN 的最常见示例是 员工不在办公室时可以访问其企业的网络。 VPN 是一种隧道协议， 这意味着它们提供了对本地不可用的内容的访问。 建立 VPN 连接时， 您可能还会说已建立 VPN 隧道。 让我们回到一个员工 在不在办公室时需要访问公司资源的示例。 员工可以使用 VPN 客户端建立到其 公司网络的 VPN 隧道。 这将为 他们的计算机配置所谓的虚拟接口，其 IP 与已建立 VPN 连接的网络的地址空间相匹配。 通过从此虚拟接口发送数据， 计算机可以访问内部资源，就像它已 物理连接到专用网络一样。 大多数 VPN 通过使用传输层的有效负载部分来传输 实际上包含整个第二组数据包的加密负载。用于遍历远程网络的数据包的网络、传输层和应用层。基本上，此有效载荷被传送到 VPN 端点，其中所有其他层 都被剥离并丢弃。 然后，有效负载将被解密， 使 VPN 服务器具有新数据包的前三层。 这将使用适当的数据链路层信息进行封装，并通 过网络发送。 这个过程是相反的，在相反的方向完成。 VPN 通常需要严格的身份验证程序，以 确保它们只能由有 权这样做的计算机和用户连接。 事实上，VPN 是首批使用双因素 身份验证的技术之一。 双重身份验证是一种不仅 需要用户名和密码才能进行身份验证的技术。 通常，用户通过 专门的硬件或软件生成一个短暂的数字令牌。 VPN 还可用于建立站点到站点的连接。 从概念上讲，与我们的 远程员工情况相比，它的工作方式没有太大的区别。 只是路由器或某个网络上的专用 VPN 设备 建立到另一个网络上的路由器或 VPN 设备的 VPN 隧道。 通过 这种方式，两个物理分离的办公室可以充当一个网络，并通过 隧道访问网络资源。 重要的是，就像 Nat 一样，VPN 是一个通用的技术概念，而不是严格定义的协议。 VPN 有很多独特的实现， 它们如何工作的细节可能会有很多不同。 最重要的一点是，VPN 是一种使用加密 隧道的技术，允许远程计算机或网络像连接到 实际上并未实际连接到的网络一样。